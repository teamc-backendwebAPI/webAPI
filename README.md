# 概要

フォーム画面に知りたい名称を入力すれば、レシピの一覧やその詳細を知ることができるアプリです。レシピは、230万件を超えるレシピを提供している無料 API（以下のサイト）から取得しています。

https://developer.edamam.com/edamam-docs-recipe-api

今回のプロジェクトではwebAPIの設計がメインの開発だったのでGolangを使いフレームワークにGinを使うことで助長なコードを書かないようにして開発者生産性の向上を目指しました。
webAPIの機能はレシピ検索、ページ分け、APIドキュメントの表示、レシピデータの詳細表示、ソート機能をサポートしています。レシピ検索で出力される

また、チームがデータベース初心者だったのでユーザー認証についてデータベースを使いました。今後はマイページを作成してユーザーが自分の興味のあるレシピを保存する機能まで実装していきたい
と考えています。

# DEMO
## サインアップ画面
<img width="1128" alt="image" src="https://github.com/teamc-backendwebAPI/webAPI/assets/112442087/d9da82c7-a6ca-433a-964e-b548cf9ec214">

## サイト全体の流れ

![ezgif com-video-to-gif-converter](https://github.com/teamc-backendwebAPI/webAPI/assets/81165526/60c61255-5848-43d4-9309-46d35d07adab)

# 環境構築(MySQL)


mysql を起動してターミナルで以下のコマンドを実行してデータベースをローカル環境に作成してください。


1. データベースの作成
   `CREATE DATABASE c_auth;`

2. 新しいユーザーの作成
   `CREATE USER 'c_auth'@'localhost' IDENTIFIED BY 'c_webAPI_@auth123';`

3. 権限の付与
   `GRANT ALL PRIVILEGES ON c_auth.* TO 'c_auth'@'localhost';`

4. 権限のリフレッシュ
   `FLUSH PRIVILEGES;`

.envファイルをルートディレクトリに作って以下のように記述してください。""はいらないです。
```
DB_DBMS=mysql
DB_USER=c_auth
DB_PASS=c_webAPI_@auth123
DB_DBNAME=c_auth
```

`go get`コマンドで不足しているライブラリはインポートしてから`go run .`をmain.goがあるディレクトリで実行してください。

## windowsの場合
   `mysql --user=root --password`
   で接続可能
   

# エンドポイント

1. レシピ検索 API のエンドポイント<br>
   POST `/submit`　入力してもらったレシピ名を送信してもらい、その種類や詳細なレシピ情報を上記サイトから取得する。
2. レシピ詳細表示 API のエンドポイント<br>
   GET `/recipe/:index`　選択したレシピの詳細情報を取得し表示する。
3. APIドキュメントの表示
   GET `/api-documentation`　開発者向けにAPIの説明をしています。
4. レシピデータのページ分け
   GET `/submit/page/:page`　1ページあたり6リストの表示をできるようにした。




# こだわったところ

### GIN フレームワーク

go のフレームワークでは GIN を利用して、Go 言語の効率的な実行能力を最大限に引き出し、コードの可読性を向上させました。

### ページネーションの実装について
本プロジェクトでは、効率的なページネーション機能の実装に特に注力しました。データの取得と表示の最適化を目指し、MemoryStoreを活用してページネーションの状態を管理するアプローチを採用しました。これにより、アプリケーションのレスポンシブネスとユーザーエクスペリエンスの向上を実現しています。

### MemoryStoreによる状態管理
MemoryStore構造体を用いて、サーバー側でレシピデータの保持とページネーションの現在ページを管理します。この方法により、ページ間での状態の一貫性を保ちながら、動的なデータの取得とページング処理を効率化しています。

### SavePaginationとGetPaginationメソッド
MemoryStore内にSavePaginationとGetPaginationの2つのメソッドを実装することで、現在のページ番号の保存と取得をスレッドセーフな方法で行えるようにしました。これにより、同時に多数のリクエストがあった場合でも、ページネーションの状態が正確に保持されます。

### ソートとフィルタリング
レシピの取得時には、ソートオプションに基づいてレシピをカロリーの昇順で並び替える機能を提供しています。これにより、ユーザーは簡単にカロリーが低いレシピを見つけることができます。また、名前に基づく検索機能も実装しており、特定のレシピを素早く見つけることが可能です。

### コードの再利用と冗長性の削減
pageNationHandler関数を通じて、ページネーションのロジックを一箇所に集約しました。これにより、異なるエンドポイント間でのページネーション処理の再利用性を高め、コードの冗長性を削減しています。また、コードの保守性と拡張性の向上にも寄与しています。

### 詳細ページ

取得した API を map で回して全て表示させることは技術的に難しくないが、ユーザーフレンドリーではない。そのため、カードとしてレシピのタイトルと写真のみ表示し、そのレシピをクリックすることで詳細ページに移動できるように構築を行なった。

### ログイン機能

mysqlを利用してサインアップ、ログイン機能の実装を行なった。



# 改善点

### ログイン機能を活用

現在はサインアップとログインがあるだけで、機能として活用されていない。改善点としては、レシピの保存機能を実装し、ユーザーが保存したレシピをいつでも見れるような仕組みに構築することが挙げられる。

### レシピのシェア機能

現在はEdamamのデータを利用して表示しているだけだが、ログインしたユーザーが開発したレシピをアップロードしたり、自分で編集できたりしてシェアすることができる機能を実装したいと考えている。

### 本番環境へのデプロイ

現在はローカル環境で環境構築をしないと動かないが、あらゆるユーザーが利用できるようにインフラを整え、本番環境へデプロイしたいと考えている。


# 制限事項

EDAMAM の DEVELOPER 向け API を使用しています。フリーライセンスであり、検索できる回数に限りがあります。
